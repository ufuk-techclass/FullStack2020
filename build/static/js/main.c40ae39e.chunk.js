(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t(15),a=t.n(r),u=t(6),i=t(3),s=t(4),l=t.n(s),d="/api/persons/",h=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(d).concat(e)).then((function(e){return e.data}))},f=function(e,n){return l.a.put("".concat(d).concat(e),n).then((function(e){return e.data}))},m=function(e){var n=e.person,t=e.handleDelete;return Object(c.jsxs)("div",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},O=function(e){var n=e.myFilter,t=e.persons,o=e.handleDelete;return Object(c.jsx)("div",{children:n.length>0?n.map((function(e){return Object(c.jsx)(m,{person:e,handleDelete:o},e.id)})):t.map((function(e){return Object(c.jsx)(m,{person:e,handleDelete:o},e.id)}))})},p=function(e){var n=e.handleSearch;return Object(c.jsxs)("div",{children:["filter shown with: ",Object(c.jsx)("input",{onChange:n})]})},g=function(e){var n=e.addNote,t=e.newName,o=e.newNumber,r=e.handleNoteChange,a=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.message,t=e.infoSuccess;return null===n?null:Object(c.jsx)("div",{className:t?"error":"success",children:n})},x=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),s=Object(i.a)(a,2),l=s[0],d=s[1],m=Object(o.useState)(""),x=Object(i.a)(m,2),w=x[0],N=x[1],S=Object(o.useState)(""),C=Object(i.a)(S,2),D=C[0],y=C[1],T=Object(o.useState)(null),k=Object(i.a)(T,2),V=k[0],E=k[1],F=Object(o.useState)(!0),J=Object(i.a)(F,2),L=J[0],A=J[1],B=function(){console.log("get all persons"),h().then((function(e){r(e)})).catch((function(e){console.log("error: ",e)}))};Object(o.useEffect)(B,[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(v,{message:V,infoSuccess:L}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{handleSearch:function(e){var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())?n:console.log("no")}));n.length>0?y(n):y("")}}),Object(c.jsx)("h3",{children:"Add a new"}),Object(c.jsx)(g,{addNote:function(e){e.preventDefault();var n={name:l,number:w,id:Math.random()},c=t.filter((function(e){return e.name===l}));if(0!==c.length)if(window.confirm("".concat(l,"  is already in the phonebook, replace the old number with a new one?"))){var o=Object(u.a)(Object(u.a)({},c[0]),{},{number:w});f(c[0].id,o).then((function(){B(),d(""),N(""),A(!0),E("".concat(o.name,"'s phone numeber is updated")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){A(!1),E("Validation error: ".concat(e.response.data.error)),setTimeout((function(){E(null)}),2e3),console.log("error: ",e.response.data)}))}else d(""),N(""),y("");else j(n).then((function(e){r(t.concat(e)),d(""),N(""),y(""),A(!0),E("".concat(e.name," is added")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){A(!1),E("Validation error: ".concat(e.response.data.error," ")),setTimeout((function(){E(null)}),2e3),console.log("error-add: ",e.response.data)}))},newName:l,handleNoteChange:function(e){d(e.target.value)},newNumber:w,handleNumberChange:function(e){N(e.target.value)}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(O,{myFilter:D,persons:t,handleDelete:function(e){window.confirm("Delete ".concat(e.name," "))&&b(e.id).then((function(){B(),A(!0),E("".concat(e.name," is successfully deleted ")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){A(!1),E("Validation error: ".concat(e.response.data.error," ")),setTimeout((function(){E(null)}),2e3),console.log("error-delete: ",e)}))}})]})};t(38);a.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c40ae39e.chunk.js.map