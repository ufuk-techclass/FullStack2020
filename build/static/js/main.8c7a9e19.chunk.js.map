{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Person","person","handleDelete","name","number","onClick","Persons","myFilter","persons","length","map","Filter","handleSearch","onChange","PersonForm","addNote","newName","newNumber","handleNoteChange","handleNumberChange","onSubmit","value","type","Notification","message","infoSuccess","className","App","useState","setPersons","setNewName","setNewNumber","setMyFilter","infoMessage","setInfoMessage","setInfoSuccess","hook","console","log","personService","initialNotes","catch","error","useEffect","event","mySearch","filter","p","toLowerCase","includes","target","preventDefault","noteObject","Math","random","result","window","confirm","updatedPerson","setTimeout","returnedPerson","concat","selectedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8c7a9e19.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons/'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n    //response.data is returned\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n    //response.data is returned\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const request = axios.delete(`${baseUrl}${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, deletePerson, update }","import React from 'react'\r\n\r\nconst Person = ({ person, handleDelete }) => {\r\n    return (\r\n        <div>\r\n            {person.name} {person.number}\r\n            <button onClick={() => handleDelete(person)}>delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ myFilter, persons, handleDelete }) => {\r\n    return (\r\n        <div>\r\n            {myFilter.length > 0\r\n                ?\r\n                myFilter.map(person =>\r\n                    <Person key={person.id} person={person} handleDelete={handleDelete} />\r\n                )\r\n                : persons.map(person =>\r\n                    <Person key={person.id} person={person} handleDelete={handleDelete} />\r\n                )}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({ handleSearch }) => {\r\n\r\n    return (\r\n        <div>\r\n            filter shown with: <input onChange={handleSearch} />\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ addNote, newName, newNumber, handleNoteChange, handleNumberChange }) => {\r\n\r\n    return (\r\n        <form onSubmit={addNote}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNoteChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Notification = ({ message, infoSuccess }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={infoSuccess ? \"error\" : \"success\"}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import personService from '../services/persons'\r\nimport React, { useState, useEffect } from 'react'\r\nimport Persons from './Persons'\r\nimport Filter from './Filter'\r\nimport PersonForm from './PersonForm'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [myFilter, setMyFilter] = useState('')\r\n    const [infoMessage, setInfoMessage] = useState(null)\r\n    const [infoSuccess, setInfoSuccess] = useState(true)\r\n\r\n    //create Id (very low chance to assign same id to 2 different person)\r\n    //Date.now() could be better\r\n    let randomId = () => {\r\n        return Math.random();\r\n    };\r\n\r\n\r\n    const hook = () => {\r\n        console.log('get all persons')\r\n        personService\r\n            .getAll()\r\n            .then(initialNotes => {\r\n                setPersons(initialNotes)\r\n            })\r\n            .catch(error => {\r\n                console.log(\"error: \", error)\r\n            })\r\n    }\r\n\r\n    useEffect(hook, [])\r\n\r\n    const addNote = (event) => {\r\n        event.preventDefault()\r\n\r\n        const noteObject = {\r\n            name: newName, number: newNumber, id: randomId()\r\n        }\r\n\r\n        const result = persons.filter(p => p.name === newName)\r\n\r\n        //if input name matches with the list\r\n        if (result.length !== 0) {\r\n            //update number, if confirmed\r\n            if (window.confirm(`${newName}  is already in the phonebook, replace the old number with a new one?`)) {\r\n                //update person object with the new number\r\n                const updatedPerson = { ...result[0], number: newNumber }\r\n\r\n                personService\r\n                    .update(result[0].id, updatedPerson)\r\n                    .then(() => {\r\n                        hook();\r\n                        setNewName('');\r\n                        setNewNumber('');\r\n                        setInfoSuccess(true)\r\n                        setInfoMessage(`${updatedPerson.name}'s phone numeber is updated`)\r\n                        setTimeout(() => {\r\n                            setInfoMessage(null)\r\n                        }, 2000);\r\n                    })\r\n                    .catch(error => {\r\n                        setInfoSuccess(false)\r\n                        console.log(\"error: \", error)\r\n                    })\r\n\r\n            }\r\n            //reset states, if unconfirmed\r\n            else {\r\n                setNewName('')\r\n                setNewNumber('')\r\n                setMyFilter('')\r\n            }\r\n\r\n        }\r\n        //input name does not match with the list\r\n        //add new person to the list\r\n        else {\r\n            personService\r\n                .create(noteObject)\r\n                .then(returnedPerson => {\r\n                    setPersons(persons.concat(returnedPerson));\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                    setMyFilter('')\r\n                    setInfoSuccess(true)\r\n                    setInfoMessage(`${returnedPerson.name} is added`)\r\n                    setTimeout(() => {\r\n                        setInfoMessage(null)\r\n                    }, 2000)\r\n\r\n                })\r\n                .catch(error => {\r\n                    setInfoSuccess(false)\r\n                    console.log(\"error: \", error)\r\n                })\r\n\r\n        }\r\n    }\r\n\r\n    const handleNoteChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleSearch = (event) => {\r\n        const mySearch = persons.filter(p => p.name.toLowerCase().includes(event.target.value.toLowerCase()) ? p : console.log(\"no\"))\r\n        mySearch.length > 0 ?\r\n            setMyFilter(mySearch)\r\n            : setMyFilter('')\r\n    }\r\n\r\n    const handleDelete = (selectedPerson) => {\r\n        if (window.confirm(`Delete ${selectedPerson.name} `)) {\r\n            personService\r\n                .deletePerson(selectedPerson.id)\r\n                .then(() => {\r\n                    hook()\r\n                    setInfoSuccess(true)\r\n                    setInfoMessage(`${selectedPerson.name} is successfully deleted `)\r\n                    setTimeout(() => {\r\n                        setInfoMessage(null)\r\n                    }, 2000)\r\n                })\r\n                .catch(error => {\r\n                    setInfoSuccess(false)\r\n                    setInfoMessage(`${selectedPerson.name} has already been removed from server`)\r\n                    setTimeout(() => {\r\n                        setInfoMessage(null)\r\n                    }, 2000);\r\n                    console.log(\"error: \", error)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Notification message={infoMessage} infoSuccess={infoSuccess} />\r\n            <h2>Phonebook</h2>\r\n            <Filter handleSearch={handleSearch} />\r\n            <h3>Add a new</h3>\r\n            <PersonForm addNote={addNote} newName={newName} handleNoteChange={handleNoteChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n            <h3>Numbers</h3>\r\n            <Persons myFilter={myFilter} persons={persons} handleDelete={handleDelete} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}